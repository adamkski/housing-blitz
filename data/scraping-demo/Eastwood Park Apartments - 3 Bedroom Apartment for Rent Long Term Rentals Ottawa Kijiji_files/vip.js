void 0===Kj.Module&&(Kj.Module={}),Kj.Module.Global=angular.module("Global",[]),Kj.Module.Global.config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self",location.protocol+Kj.extVars.staticUrl+"**"])}]);;void 0===Kj.Module&&(Kj.Module={}),Kj.Module.MyKijiji=angular.module("MyKijiji",["Global","elif","infinite-scroll","ngRoute","KjSpinner","StickedModule","angularModalService","templates-main","pasvaz.bindonce"]),Kj.Module.MyKijiji.config(["$sceDelegateProvider","$routeProvider","$locationProvider",function(a,b,c){a.resourceUrlWhitelist(["self",location.protocol+Kj.extVars.staticUrl+"**"])}]);;Kj.Module.MyKijiji.controller("SvipController",["$scope","SurveyService","MessageService",function(a,b,c){"use strict";a.repostWithoutSurvey=function(){b.repostWithoutSurveyModal([Kj.extVars.survey.item],Kj.extVars.superState,a.updatedItem)},a.deleteWithoutSurvey=function(){b.deleteWithoutSurveyModal([Kj.extVars.survey.item],Kj.extVars.superState,a.updatedItem)},a.updatedItem=function(a){"OK"===a.status?c.publish("global",{"text":a.value}):c.publish("global",{"text":a.value,"type":"error"})},!0===Kj.extVars.survey.repostAd&&a.repostWithoutSurvey(),a.selectedTopAdVal=Kj.extVars.svipTopAd.val,a.selectedTopAdPrice=Kj.extVars.svipTopAd.price,a.selectedBumpUpVal=Kj.extVars.svipBumpUp.val,a.selectedBumpUpPrice=Kj.extVars.svipBumpUp.price,$("#svipTopAdSelector").change(function(){a.selectedTopAdPrice=$(this).find("option:selected").attr("data-price").toString()}),$("#svipBumpUpSelector").change(function(){a.selectedBumpUpPrice=$(this).find("option:selected").attr("data-price").toString()})}]);;!function(a){"use strict";document.createElement("message-bucket"),Kj.Module.Global.directive("messageBucket",function(){return{"scope":{"key":"@for"},"restrict":"EA","transclude":!0,"templateUrl":Kj.Utilities.getPartialUrl("messageBucket"),"controller":["$scope",function(a){a.messages=[],a.$on("message-for:"+a.key,function(b,c){a.messages.push(c)}),a.$on("message-clear-for:"+a.key,function(b){a.messages=[]}),a.clear=function(){a.messages=[]}}]}})}(window);;!function(a){"use strict";void 0===Kj.Module&&(Kj.Module={}),Kj.Module.Spinner=angular.module("KjSpinner",[]),Kj.Module.Spinner.factory("SpinnerService",["$rootScope",function(a){var b={};return b.spin=function(b){a.$broadcast("spinner:spin:"+b)},b.stop=function(b){a.$broadcast("spinner:stop:"+b)},b}]),document.createElement("spinner"),Kj.Module.Spinner.directive("spinner",function(){return{"scope":{"key":"@key","toggleParent":"@toggleParent"},"restrict":"E","templateUrl":Kj.Utilities.getPartialUrl("spinner"),"compile":function(a,b){return function(a,b,c,d){a.elementParent=b.closest(".spinner-parent"),b.addClass(a.key),0===a.elementParent.length&&(a.elementParent=b.parent().addClass("spinner-parent")),a.elementParent.length>0&&a.toggleParent&&a.elementParent.hide(),a.$on("spinner:spin:"+a.key,function(c){b.addClass("active"),a.toggleParent&&a.elementParent.show()}),a.$on("spinner:stop:"+a.key,function(c){b.removeClass("active"),a.toggleParent&&a.elementParent.hide()})}}}})}(window);;!function(a){"use strict";void 0===Kj.Module&&(Kj.Module={}),Kj.Module.Sticked=angular.module("StickedModule",[]),Kj.Module.Sticked.directive("sticked",["$timeout",function(a){return{"restrict":"A","scope":{"triggerEvent":"@stickedTrigger"},"link":function(b,c,d){b.$on(b.triggerEvent,function(){a(function(){void 0===$(c).data("plugin_sticked")?$(c).sticked(b.$eval(d.sticked)):$(c).data("plugin_sticked").updateSticky()})})}}}])}(window);;Kj.Module.Global.filter("rawHtml",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]);;angular.module("templates-main",["messageBucket.html","spinner.html"]),angular.module("messageBucket.html",[]).run(["$templateCache",function(a){a.put("messageBucket.html",'<div data-ng-repeat="message in messages" class="{{message.type}}">\n    <div data-ng-if="message.showCloseButton" class="close-x" ng-click="clear()"></div>\n    <span class="icon"></span>\n\n    <span class="message">\n        <strong data-ng-if="message.headline.length">{{message.headline}}</strong>\n        <br data-ng-if="message.headline.length" />\n        {{message.text}}\n    </span>\n</div>')}]),angular.module("spinner.html",[]).run(["$templateCache",function(a){a.put("spinner.html",'<div class="loading-overlay">\n    <div class="wrapper">\n        <div class="spinner"></div>\n        <p>{{loadingMsg}}</p>\n    </div>\n</div>')}]);;!function(a){"use strict";Kj.Module.Global.factory("AjaxTokenService",["$log",function(a){var b,c={};return c.get=function(){if(void 0!==b)return b;var c=angular.element('[name="ca.kijiji.xsrf.token"]');if(c.length)return b=c.val();a.error("AjaxTokenService - No token found on page (did you include <xsrf:token>?)")},c}])}(window);;!function(a){"use strict";Kj.Module.Global.factory("MessageService",["$rootScope",function(a){var b={};return b.publish=function(c,d,e){c=c||"global";var f={"type":"success","headline":"","showCloseButton":"global"===c||"header"===c,"text":""};d=$.extend(f,d),!1!==e&&b.clear(c),a.$broadcast("message-for:"+c,d)},b.clear=function(b){a.$broadcast("message-clear-for:"+b)},b}])}(window);;!function(a){"use strict";Kj.Module.Global.factory("SurveyService",["$http","AjaxTokenService","TransformAjaxToFormPostService","ModalService","MessageService",function(a,b,c,d,e){var f,g={};g.deleteWithoutSurveyModal=function(a,b,c){var d=g.populateItemsWithoutQuestions(a),j={"Mode":b,"Action":"DELETE_ADS","ads":d,"uuid":Kj.extVars.survey.uuid,"needsRedirect":Kj.extVars.survey.needsRedirect};i(),h(),g.save(f.deleteEndpoint,j).success(function(b,d){switch(b.status){case"OK":e.publish("header",{"text":b.value}),c({"items":a});break;case"REDIRECT":document.location=b.value.replace("redirect:","");break;default:e.publish("header",{"text":b.value,"type":"error"})}}).error(function(a,b){e.publish("header",{"text":Kj.extVars.survey.copy.deleteSurvey.error,"type":"error"})})},g.repostWithoutSurveyModal=function(a,b,c){var d=g.populateItemsWithoutQuestions(a),i={"Mode":b,"Action":"REPOST_ADS","ads":d,"uuid":Kj.extVars.survey.uuid,"needsRedirect":Kj.extVars.survey.needsRedirect};h(),g.save(f.repostEndpoint,i).success(function(b,d){switch(b.status){case"OK":e.publish("header",{"text":b.value}),c({"items":a});break;case"REDIRECT":document.location=b.value.replace("redirect:","");break;default:e.publish("header",{"text":b.value,"type":"error"})}}).error(function(a,b){e.publish("header",{"text":Kj.extVars.survey.copy.repostSurvey.error,"type":"error"})})},g.save=function(d,e){return e=$.extend(e,{"ca.kijiji.xsrf.token":b.get()}),e.ads=angular.toJson(e.ads),a({"method":"post","url":d,"data":e,"transformRequest":c})},g.populateItemsWithoutQuestions=function(a){for(var b=[],c=a.length,d=0;d<c;d++)b.push({"adId":a[d].id});return b};var h=function(){f=!0===Kj.extVars.survey.anon?Kj.extVars.survey.endPoints.anon:Kj.extVars.survey.endPoints},i=function(){Kj.Tracking.trackGAEvent({"action":"DeleteAdSuccess","label":"svip"})};return g}])}(window);;!function(a){"use strict";Kj.Module.Global.factory("TransformAjaxToFormPostService",function(){function a(a){if(!angular.isObject(a))return null===a?"":a.toString();var b=[];for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(null===d?"":d))}return b.join("&").replace(/%20/g,"+")}var b={};return b.transformRequest=function(b,c){return c()["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8",a(b)},b})}(window);;!function(a){"use strict";Kj.Module.Global.factory("ValidationService",function(){var a={};return a.isString=function(a){return"string"==typeof a},a.isStringEmpty=function(b){return!a.isString(b)||""===b},a.delegate=function(){return Kj.Forms.initValidateInput.apply(window,arguments)},a})}(window);;!function(a){"use strict";function b(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(this).ajaxSubmit(c))}function c(b){var c=b.target,d=a(c);if(!d.is("[type=submit],[type=image]")){var e=d.closest("[type=submit]");if(0===e.length)return;c=e[0]}var f=this;if(f.clk=c,"image"==c.type)if(void 0!==b.offsetX)f.clk_x=b.offsetX,f.clk_y=b.offsetY;else if("function"==typeof a.fn.offset){var g=d.offset();f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top}else f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop;setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function d(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var e={};e.fileapi=void 0!==a("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var f=!!a.fn.prop;a.fn.attr2=function(){if(!f)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)},a.fn.ajaxSubmit=function(b){function c(c){var d,e,f=a.param(c,b.traditional).split("&"),g=f.length,h=[];for(d=0;d<g;d++)f[d]=f[d].replace(/\+/g," "),e=f[d].split("="),h.push([decodeURIComponent(e[0]),decodeURIComponent(e[1])]);return h}function g(d){for(var e=new FormData,f=0;f<d.length;f++)e.append(d[f].name,d[f].value);if(b.extraData){var g=c(b.extraData);for(f=0;f<g.length;f++)g[f]&&e.append(g[f][0],g[f][1])}b.data=null;var h=a.extend(!0,{},a.ajaxSettings,b,{"contentType":!1,"processData":!1,"cache":!1,"type":i||"POST"});b.uploadProgress&&(h.xhr=function(){var c=a.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(a){var c=0,d=a.loaded||a.position,e=a.total;a.lengthComputable&&(c=Math.ceil(d/e*100)),b.uploadProgress(a,d,e,c)},!1),c}),h.data=null;var j=h.beforeSend;return h.beforeSend=function(a,b){b.data=e,j&&j.call(this,a,b)},a.ajax(h)}function h(c){function e(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(a){d("cannot get iframe.contentWindow document: "+a)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(c){d("cannot get iframe.contentDocument: "+c),b=a.document}return b}function g(){function b(){try{var a=e(r).readyState;d("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(a){d("Server abort: ",a," (",a.name,")"),h(A),w&&clearTimeout(w),w=void 0}}var c=l.attr2("target"),f=l.attr2("action");x.setAttribute("target",o),i&&!/post/i.test(i)||x.setAttribute("method","POST"),f!=m.url&&x.setAttribute("action",m.url),m.skipEncodingOverride||i&&!/post/i.test(i)||l.attr({"encoding":"multipart/form-data","enctype":"multipart/form-data"}),m.timeout&&(w=setTimeout(function(){v=!0,h(z)},m.timeout));var g=[];try{if(m.extraData)for(var j in m.extraData)m.extraData.hasOwnProperty(j)&&(a.isPlainObject(m.extraData[j])&&m.extraData[j].hasOwnProperty("name")&&m.extraData[j].hasOwnProperty("value")?g.push(a('<input type="hidden" name="'+m.extraData[j].name+'">').val(m.extraData[j].value).appendTo(x)[0]):g.push(a('<input type="hidden" name="'+j+'">').val(m.extraData[j]).appendTo(x)[0]));m.iframeTarget||q.appendTo("body"),r.attachEvent?r.attachEvent("onload",h):r.addEventListener("load",h,!1),setTimeout(b,15);try{x.submit()}catch(a){var k=document.createElement("form").submit;k.apply(x)}}finally{x.setAttribute("action",f),c?x.setAttribute("target",c):l.removeAttr("target"),a(g).remove()}}function h(b){if(!s.aborted&&!F){if(E=e(r),E||(d("cannot access response document"),b=A),b===z&&s)return s.abort("timeout"),void y.reject(s,"timeout");if(b==A&&s)return s.abort("server abort"),void y.reject(s,"error","server abort");if(E&&E.location.href!=m.iframeSrc||v){r.detachEvent?r.detachEvent("onload",h):r.removeEventListener("load",h,!1);var c,f="success";try{if(v)throw"timeout";var g="xml"==m.dataType||E.XMLDocument||a.isXMLDoc(E);if(d("isXml="+g),!g&&window.opera&&(null===E.body||!E.body.innerHTML)&&--G)return d("requeing onLoad callback, DOM not available"),void setTimeout(h,250);var i=E.body?E.body:E.documentElement;s.responseText=i?i.innerHTML:null,s.responseXML=E.XMLDocument?E.XMLDocument:E,g&&(m.dataType="xml"),s.getResponseHeader=function(a){return{"content-type":m.dataType}[a.toLowerCase()]},i&&(s.status=Number(i.getAttribute("status"))||s.status,s.statusText=i.getAttribute("statusText")||s.statusText);var j=(m.dataType||"").toLowerCase(),k=/(json|script|text)/.test(j);if(k||m.textarea){var l=E.getElementsByTagName("textarea")[0];if(l)s.responseText=l.value,s.status=Number(l.getAttribute("status"))||s.status,s.statusText=l.getAttribute("statusText")||s.statusText;else if(k){var o=E.getElementsByTagName("pre")[0],p=E.getElementsByTagName("body")[0];o?s.responseText=o.textContent?o.textContent:o.innerText:p&&(s.responseText=p.textContent?p.textContent:p.innerText)}}else"xml"==j&&!s.responseXML&&s.responseText&&(s.responseXML=H(s.responseText));try{D=J(s,j,m)}catch(a){f="parsererror",s.error=c=a||f}}catch(a){d("error caught: ",a),f="error",s.error=c=a||f}s.aborted&&(d("upload aborted"),f=null),s.status&&(f=s.status>=200&&s.status<300||304===s.status?"success":"error"),"success"===f?(m.success&&m.success.call(m.context,D,"success",s),y.resolve(s.responseText,"success",s),n&&a.event.trigger("ajaxSuccess",[s,m])):f&&(void 0===c&&(c=s.statusText),m.error&&m.error.call(m.context,s,f,c),y.reject(s,"error",c),n&&a.event.trigger("ajaxError",[s,m,c])),n&&a.event.trigger("ajaxComplete",[s,m]),n&&!--a.active&&a.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,s,f),F=!0,m.timeout&&clearTimeout(w),setTimeout(function(){m.iframeTarget?q.attr("src",m.iframeSrc):q.remove(),s.responseXML=null},100)}}}var j,k,m,n,o,q,r,s,t,u,v,w,x=l[0],y=a.Deferred();if(y.abort=function(a){s.abort(a)},c)for(k=0;k<p.length;k++)j=a(p[k]),f?j.prop("disabled",!1):j.removeAttr("disabled");if(m=a.extend(!0,{},a.ajaxSettings,b),m.context=m.context||m,o="jqFormIO"+(new Date).getTime(),m.iframeTarget?(q=a(m.iframeTarget),u=q.attr2("name"),u?o=u:q.attr2("name",o)):(q=a('<iframe name="'+o+'" src="'+m.iframeSrc+'" />'),q.css({"position":"absolute","top":"-1000px","left":"-1000px"})),r=q[0],s={"aborted":0,"responseText":null,"responseXML":null,"status":0,"statusText":"n/a","getAllResponseHeaders":function(){},"getResponseHeader":function(){},"setRequestHeader":function(){},"abort":function(b){var c="timeout"===b?"timeout":"aborted";d("aborting upload... "+c),this.aborted=1;try{r.contentWindow.document.execCommand&&r.contentWindow.document.execCommand("Stop")}catch(a){}q.attr("src",m.iframeSrc),s.error=c,m.error&&m.error.call(m.context,s,c,b),n&&a.event.trigger("ajaxError",[s,m,c]),m.complete&&m.complete.call(m.context,s,c)}},n=m.global,n&&0==a.active++&&a.event.trigger("ajaxStart"),n&&a.event.trigger("ajaxSend",[s,m]),m.beforeSend&&!1===m.beforeSend.call(m.context,s,m))return m.global&&a.active--,y.reject(),y;if(s.aborted)return y.reject(),y;(t=x.clk)&&(u=t.name)&&!t.disabled&&(m.extraData=m.extraData||{},m.extraData[u]=t.value,"image"==t.type&&(m.extraData[u+".x"]=x.clk_x,m.extraData[u+".y"]=x.clk_y));var z=1,A=2,B=a("meta[name=csrf-token]").attr("content"),C=a("meta[name=csrf-param]").attr("content");C&&B&&(m.extraData=m.extraData||{},m.extraData[C]=B),m.forceSync?g():setTimeout(g,10);var D,E,F,G=50,H=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},I=a.parseJSON||function(a){return window.eval("("+a+")")},J=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=I(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g};return y}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var i,j,k,l=this;"function"==typeof b?b={"success":b}:void 0===b&&(b={}),i=b.type||this.attr2("method"),j=b.url||this.attr2("action"),k="string"==typeof j?a.trim(j):"",k=k||window.location.href||"",k&&(k=(k.match(/^([^#]+)/)||[])[1]),b=a.extend(!0,{"url":k,"success":a.ajaxSettings.success,"type":i||a.ajaxSettings.type,"iframeSrc":/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);var m={};if(this.trigger("form-pre-serialize",[this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&!1===b.beforeSerialize(this,b))return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var n=b.traditional;void 0===n&&(n=a.ajaxSettings.traditional);var o,p=[],q=this.formToArray(b.semantic,p);if(b.data&&(b.extraData=b.data,o=a.param(b.data,n)),b.beforeSubmit&&!1===b.beforeSubmit(q,this,b))return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[q,this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var r=a.param(q,n);o&&(r=r?r+"&"+o:o),"GET"==b.type.toUpperCase()?(b.url+=(b.url.indexOf("?")>=0?"&":"?")+r,b.data=null):b.data=r;var s=[];if(b.resetForm&&s.push(function(){l.resetForm()}),b.clearForm&&s.push(function(){l.clearForm(b.includeHidden)}),!b.dataType&&b.target){var t=b.success||function(){};s.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(t,arguments)})}else b.success&&s.push(b.success);if(b.success=function(a,c,d){for(var e=b.context||this,f=0,g=s.length;f<g;f++)s[f].apply(e,[a,c,d||l,l])},b.error){var u=b.error;b.error=function(a,c,d){var e=b.context||this;u.apply(e,[a,c,d,l])}}if(b.complete){var v=b.complete;b.complete=function(a,c){var d=b.context||this;v.apply(d,[a,c,l])}}var w=a("input[type=file]:enabled",this).filter(function(){return""!=a(this).val()}),x=w.length>0,y="multipart/form-data",z=l.attr("enctype")==y||l.attr("encoding")==y,A=e.fileapi&&e.formdata;d("fileAPI :"+A);var B,C=(x||z)&&!A;!1!==b.iframe&&(b.iframe||C)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){B=h(q)}):B=h(q):B=(x||z)&&A?g(q):a.ajax(b),l.removeData("jqxhr").data("jqxhr",B);for(var D=0;D<p.length;D++)p[D]=null;return this.trigger("form-submit-notify",[this,b]),this},a.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&a.isFunction(a.fn.on),!e.delegation&&0===this.length){var f={"s":this.selector,"c":this.context};return!a.isReady&&f.s?(d("DOM not ready, queuing ajaxForm"),a(function(){a(f.s,f.c).ajaxForm(e)}),this):(d("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return e.delegation?(a(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,e,b).on("click.form-plugin",this.selector,e,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,b).bind("click.form-plugin",e,c)},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b,c){var d=[];if(0===this.length)return d;var f=this[0],g=b?f.getElementsByTagName("*"):f.elements;if(!g)return d;var h,i,j,k,l,m,n;for(h=0,m=g.length;h<m;h++)if(l=g[h],(j=l.name)&&!l.disabled)if(b&&f.clk&&"image"==l.type)f.clk==l&&(d.push({"name":j,"value":a(l).val(),"type":l.type}),d.push({"name":j+".x","value":f.clk_x},{"name":j+".y","value":f.clk_y}));else if((k=a.fieldValue(l,!0))&&k.constructor==Array)for(c&&c.push(l),i=0,n=k.length;i<n;i++)d.push({"name":j,"value":k[i]});else if(e.fileapi&&"file"==l.type){c&&c.push(l);var o=l.files;if(o.length)for(i=0;i<o.length;i++)d.push({"name":j,"value":o[i],"type":l.type});else d.push({"name":j,"value":"","type":l.type})}else null!==k&&void 0!==k&&(c&&c.push(l),d.push({"name":j,"value":k,"type":l.type,"required":l.required}));if(!b&&f.clk){var p=a(f.clk),q=p[0];j=q.name,j&&!q.disabled&&"image"==q.type&&(d.push({"name":j,"value":p.val()}),d.push({"name":j+".x","value":f.clk_x},{"name":j+".y","value":f.clk_y}))}return d},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var d=this.name;if(d){var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;f<g;f++)c.push({"name":d,"value":e[f]});else null!==e&&void 0!==e&&c.push({"name":this.name,"value":e})}}),a.param(c)},a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;d<e;d++){var f=this[d],g=a.fieldValue(f,b);null===g||void 0===g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g))}return c},a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){var g=b.selectedIndex;if(g<0)return null;for(var h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;l<k;l++){var m=i[l];if(m.selected){var n=m.value;if(n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val(""):b&&(!0===b&&/hidden/.test(d)||"string"==typeof b&&a(this).is(b))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var c=this.type;if("checkbox"==c||"radio"==c)this.checked=b;else if("option"==this.tagName.toLowerCase()){var d=a(this).parent("select");b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b}})},a.fn.ajaxSubmit.debug=!1}("undefined"!=typeof jQuery?jQuery:window.Zepto);;!function(a){function b(){}function c(a){g=[a]}function d(a,b,c){return a&&a.apply&&a.apply(b.context||b,c)}function e(a){return/\?/.test(a)?"&":"?"}function f(f){function n(a){X++||(Y(),S&&(A[U]={"s":[a]}),O&&(a=O.apply(f,[a])),d(L,f,[a,v,f]),d(N,f,[f,v]))}function F(a){X++||(Y(),S&&a!=w&&(A[U]=a),d(M,f,[f,a]),d(N,f,[f,a]))}f=a.extend({},C,f);var G,H,I,J,K,L=f.success,M=f.error,N=f.complete,O=f.dataFilter,P=f.callbackParameter,Q=f.callback,R=f.cache,S=f.pageCache,T=f.charset,U=f.url,V=f.data,W=f.timeout,X=0,Y=b;return y&&y(function(a){a.done(L).fail(M),L=a.resolve,M=a.reject}).promise(f),f.abort=function(){!X++&&Y()},!1===d(f.beforeSend,f,[f])||X?f:(U=U||j,V=V?"string"==typeof V?V:a.param(V,f.traditional):j,U+=V?e(U)+V:j,P&&(U+=e(U)+encodeURIComponent(P)+"=?"),!R&&!S&&(U+=e(U)+"_"+(new Date).getTime()+"="),U=U.replace(/=\?(&|$)/,"="+Q+"$1"),S&&(G=A[U])?G.s?n(G.s[0]):F(G):(x[Q]=c,I=a(u)[0],I.id=m+B++,T&&(I[i]=T),D&&D.version()<11.6?(J=a(u)[0]).text="document.getElementById('"+I.id+"')."+p+"()":I[h]=h,E&&(I.htmlFor=I.id,I.event=o),I[q]=I[p]=I[r]=function(a){if(!I[s]||!/i/.test(I[s])){try{I[o]&&I[o]()}catch(a){}a=g,g=0,a?n(a[0]):F(k)}},I.src=U,Y=function(a){K&&clearTimeout(K),I[r]=I[q]=I[p]=null,z[t](I),J&&z[t](J)},z[l](I,H=z.firstChild),J&&z[l](J,H),K=W>0&&setTimeout(function(){F(w)},W)),f)}var g,h="async",i="charset",j="",k="error",l="insertBefore",m="_jqjsp",n="on",o=n+"click",p=n+k,q=n+"load",r=n+"readystatechange",s="readyState",t="removeChild",u="<script>",v="success",w="timeout",x=window,y=a.Deferred,z=a("head")[0]||document.documentElement,A={},B=0,C={"callback":m,"url":location.href},D=x.opera,E=!!a("<div>").html("\x3c!--[if IE]><i><![endif]--\x3e").find("i").length;f.setup=function(b){a.extend(C,b)},a.jsonp=f}(jQuery);;Kj.Vip=function(){var a={"init":function(a){this.checkPassedArgs(a),this.opt=a,Kj.Vip.initReportAd({"adId":this.opt.adId,"flagAdAjaxUrl":this.opt.flagAdAjaxUrl}),Kj.Vip.initPrintPage({"openPrintPage":this.opt.openPrintPage,"openPrintPageUrl":this.opt.openPrintPageUrl}),$(".image-placeholder").on("click",function(){Kj.Tracking.trackGAEvent({"action":"SuggestAddImageClick"})})},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.adId,"required":!0,"typeofString":"string","name":"adId"}),Kj.Utilities.verifyPassedArgs({"val":a.openPrintPage,"required":!0,"typeofString":"boolean","name":"openPrintPage"}),Kj.Utilities.verifyPassedArgs({"val":a.flagAdAjaxUrl,"required":!0,"typeofString":"string","name":"flagAdAjaxUrl","lengthMin":!0}),a.openPrintPage&&Kj.Utilities.verifyPassedArgs({"val":a.openPrintPageUrl,"required":!0,"typeofString":"string","name":"openPrintPageUrl","lengthMin":!0})}},b={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.cache(),this.bindListeners()},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.openPrintPage,"required":!0,"typeofString":"boolean","name":"openPrintPage"}),a.openPrintPage&&Kj.Utilities.verifyPassedArgs({"val":a.openPrintPageUrl,"required":!0,"typeofString":"string","name":"openPrintPageUrl","lengthMin":!0})},"cache":function(){this.dom={"printButton":$(".print"),"searchInput":$("#SearchInput")}},"bindListeners":function(){var a=this;this.dom.printButton.on("click",function(){a.printPage()})},"printPage":function(){Kj.Tracking.trackGAEvent({"action":"R2SPrint"}),this.opt.openPrintPage?window.open(this.opt.openPrintPageUrl,"_blank"):(this.dom.searchInput.css("width","60px"),window.print())}},c={"init":function(a){this.opt=a,this.cache(),this.bindListeners()},"cache":function(){this.dom={},this.dom.dealerLink=$(".website a")},"bindListeners":function(){var a=this;a.dom.dealerLink.click(function(){$.ajax({"url":a.opt.dealerLinkCounterAjaxUrl,"data":{"adId":a.opt.adId},"complete":function(){return!0}})})}},d={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.cache(),this.bindListeners(),Kj.Header.initDropDown({"dropDown":this.dom.reportButton})},"cache":function(){this.dom={},this.dom.reportScamButton=$(".flag-scam"),this.dom.reportSpamButton=$(".flag-spam"),this.dom.reportIrrelevantButton=$(".flag-irrelevant"),this.dom.reportMisCatButton=$(".flag-miscat"),this.dom.flagOtherButton=$(".flag-other"),this.dom.reportButton=$(".report"),this.dom.modalWindow=$("#FlagModal"),this.dom.modalForm=$("#ReportAd"),this.dom.modalFormEmailInput=$("#ReportEmail"),this.dom.modalFormCommentInput=$("#ReportComment"),this.dom.reportAdImage=$("#ReportAdImageSource"),this.dom.xsrfToken=$("#reportAdXsrf")},"bindListeners":function(){var a=this;a.dom.flagOtherButton.on({"click":function(b){a.openModal(b,"OTHER")}},"a"),a.dom.reportScamButton.on({"click":function(b){a.openModal(b,"PROHIBITED")}},"a"),a.dom.reportSpamButton.on({"click":function(b){a.openModal(b,"SPAM")}},"a"),a.dom.reportIrrelevantButton.on({"click":function(b){a.openModal(b,"NOT_RELEVANT")}},"a"),a.dom.reportMisCatButton.on({"click":function(b){a.openModal(b,"WRONG_CATEGORY")}},"a"),a.dom.modalForm.on({"submit":function(b){return b.preventDefault(),!0===a.validateForm()&&(a.reportAd({"reason":a.opt.reportReason,"adId":a.opt.adId,"email":a.dom.modalFormEmailInput.val(),"comment":a.dom.modalFormCommentInput.val()}),Kj.api.ModalWindow.closeModalWindow()),!1}})},"openModal":function(a,b){a.preventDefault(),this.opt.reportReason=b,Kj.initModalWindow({"modalID":this.dom.modalWindow,"formID":this.dom.modalForm,"clearForm":!0}),""!==Kj.extVars.userEmail&&(this.dom.modalFormEmailInput.removeClass("placeholder-text"),this.dom.modalFormEmailInput.val(Kj.extVars.userEmail))},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.adId,"required":!0,"typeofString":"string","name":"adId"}),Kj.Utilities.verifyPassedArgs({"val":a.flagAdAjaxUrl,"required":!0,"typeofString":"string","name":"flagAdAjaxUrl","lengthMin":!0})},"validateForm":function(){return Kj.Forms.initValidateForm({"form":this.dom.modalForm,"showInputMessages":!0,"showBoxMessages":!1})},"reportAd":function(a){a["ca.kijiji.xsrf.token"]=this.dom.xsrfToken.val();var b=this;$.ajax({"type":"POST","url":b.opt.flagAdAjaxUrl,"data":a,"success":b.reportAdResponse})},"reportAdResponse":function(a){var b="",c="";"OK"===a.status?(b=a.successMsg,c="success"):(b=a.errorMsg,c="error"),Kj.initMessages({"setMessage":!0,"messageData":{"messageClass":c,"messageText":b}})}},e={"init":function(a){return this.checkPassedArgs(a),this.opt=a,this.cache(),this.defaults(),this.bindListeners(),this},"cache":function(){this.dom={},this.dom.nextPhotoButton=$(".image-nav-next"),this.dom.previousPhotoButton=$(".image-nav-prev"),this.dom.imageContainer=$(".photo-navigation"),this.dom.largeImagesItems=this.dom.imageContainer.find("li"),this.dom.currentImageIndex=$(".current-number")},"defaults":function(){this.photoIndex=this.opt.photoIndex,this.maxImages=this.getMaxImages()},"bindListeners":function(){var a=this;a.dom.nextPhotoButton.on("click",function(b){b.preventDefault(),a.photoIndex++,a.changeImage()}),a.dom.previousPhotoButton.on("click",function(b){b.preventDefault(),a.photoIndex--,a.changeImage()})},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.photoIndex,"required":!0,"typeofString":"number","name":"photoIndex"})},"changeImage":function(){this.checkPhotoIndex(),this.updateCurrentImageIndex(),this.dom.largeImagesItems.removeClass("showing"),this.dom.largeImagesItems.eq(this.photoIndex).addClass("showing")},"checkPhotoIndex":function(){this.photoIndex>this.maxImages?this.photoIndex=0:this.photoIndex<0&&(this.photoIndex=this.maxImages)},"getMaxImages":function(){return this.dom.largeImagesItems.length-1},"updateCurrentImageIndex":function(){this.dom.currentImageIndex.html(this.photoIndex+1)}},f={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.cache(),this.defaults(),this.bindListeners()},"cache":function(){this.dom={},this.dom.thumbnailContainer=$("#ImageThumbnails"),this.dom.thumbnailImages=$("#ImageThumbnails li"),this.dom.navigationPhotoButtons=$("#ArrowNext, #ArrowPrev")},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.videoEnabled,"required":!0,"typeofString":"boolean","name":"videoEnabled"})},"defaults":function(){this.photoIndex=0,Kj.Vip.initPhotoNavigation({"photoIndex":this.photoIndex}),this.opt.videoEnabled&&(this.videoPlayer=Kj.Vip.initVideoPlayer()),void 0!==Kj.extVars.imageNumber&&(this.photoIndex=Kj.extVars.imageNumber,Kj.Vip.api.PhotoNavigation.setPhotoIndex(Kj.extVars.imageNumber),Kj.Vip.api.PhotoNavigation.changeImage(),this.changeThumbnailClasses())},"bindListeners":function(){var a=this;a.dom.thumbnailContainer.on("mouseenter","li",function(){$(this).addClass("hover")}),a.dom.thumbnailContainer.on("mouseleave","li",function(){$(this).removeClass("hover")}),a.dom.thumbnailContainer.on("click","li",function(){a.photoIndex=$(this).index(),Kj.Vip.api.PhotoNavigation.setPhotoIndex(a.photoIndex),a.changeThumbnailClasses(),Kj.Vip.api.PhotoNavigation.changeImage(),a.removeVideoPlayer($(this))}),a.dom.navigationPhotoButtons.on("click",function(){a.getPhotoIndex(),a.changeThumbnailClasses()})},"removeVideoPlayer":function(a){this.opt.videoEnabled&&!a.hasClass("video")&&this.videoPlayer.removePlayer()},"getPhotoIndex":function(){this.photoIndex=Kj.Vip.api.PhotoNavigation.getPhotoIndex()},"changeThumbnailClasses":function(){this.dom.thumbnailImages.removeClass("selected"),this.dom.thumbnailImages.eq(this.photoIndex).addClass("selected")}},g={"init":function(){return this.cache(),this.bindListeners(),this},"cache":function(){this.dom={},this.dom.videoPlayer=$("#VideoPlayer"),this.dom.videoPlayButton=this.dom.videoPlayer.find(".play-button"),this.dom.videoiFrame=this.dom.videoPlayer.find("iframe")},"bindListeners":function(){var a=this;a.dom.videoPlayButton.on({"click":function(){a.setPlayer()}})},"setPlayer":function(){this.dom.videoPlayButton.hide(),this.dom.videoiFrame.show(),this.dom.videoiFrame.attr("src",this.dom.videoiFrame.attr("data-src"))},"removePlayer":function(){void 0!==this.dom&&(this.dom.videoiFrame.hide(),this.dom.videoPlayButton.show(),this.dom.videoiFrame.attr("src",""))}},h={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.cache(),this.bindListeners()},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.getPhoneAjaxUrl,"required":!0,"typeofString":"string","name":"getPhoneAjaxUrl","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.phoneToken,"required":!0,"typeofString":"string","name":"phoneToken","lengthMin":!0})},"cache":function(){this.dom={},this.dom.replyFromPhone=$("#Phone"),this.dom.replyFromPhoneButton=$("#PhoneShowNumberButton"),this.dom.replyFromPhoneShowNumber=$("#PhoneNumber")},"bindListeners":function(){var a=this;a.dom.replyFromPhoneButton.on({"click":function(b){b.preventDefault(),a.getPhoneNumber()}})},"getPhoneNumber":function(){var a=this;$.ajax({"type":"GET","url":a.opt.getPhoneAjaxUrl,"data":{"token":a.opt.phoneToken},"success":function(b){Kj.Tracking.trackGAEvent({"action":"R2SPhoneBegin"}),a.showPhoneNumber(b)},"error":function(){Kj.Tracking.trackGAEvent({"action":"R2SPhoneRevealFail"})}})},"showPhoneNumber":function(a){var b=this;this.dom.replyFromPhoneButton.fadeOut("fast",function(){b.dom.replyFromPhoneShowNumber.html(a.phone),b.dom.replyFromPhoneShowNumber.show()})}},i={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.cache(),this.callCounterAjax()},"cache":function(){this.dom={"adVisits":$(".ad-visits")}},"callCounterAjax":function(){var a=this;$.ajax({"url":a.opt.counterAjaxUrl,"data":"adId="+a.opt.adId,"dataType":"json","success":function(b){a.successCounterAjax(b)}})},"successCounterAjax":function(a){this.dom.adVisits.text(a.numVisitsStr)},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.adId,"required":!0,"typeofString":"number","name":"adId"}),Kj.Utilities.verifyPassedArgs({"val":a.counterAjaxUrl,"required":!0,"typeofString":"string","name":"counterAjaxUrl"})}},j={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.cache(),this.bindListeners(),Kj.Tracking.initTrackFeaturePurchase({"hasEnabledFeaturesCallback":Kj.Vip.api.ManageAd.hasEnabledFeatures,"enabledFeatureNameCallback":Kj.Vip.api.ManageAd.enabledFeatureName})},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.adId,"required":!0,"typeofString":"string","name":"adId"}),Kj.Utilities.verifyPassedArgs({"val":a.title,"required":!0,"typeofString":"string","name":"title"})},"cache":function(){this.dom={},this.dom.showPromoteModalButton=$("#ManageAdWidget .tooltip-trigger"),this.dom.promoteModal=$("#PromoteModal"),this.dom.deleteAdLink=$(".delete-ad-link"),this.dom.repostAdLink=$(".repost-ad-link"),this.dom.$promoteCheckBoxes=$(".promote-list input[type=checkbox]"),this.dom.deleteSurvey={"global":{"deleteModal":$("#DeleteAd"),"deleteModalForm":$("#DeleteAdForm"),"deleteModalQuestion":$("#DeleteAd .question"),"deleteModalQuestionList":$("#DeleteAd .radio-list")},"box":{"$deleteForm":$("#DeleteForm"),"deleteModal":$("#DeleteAdModal")}},this.dom.repostSurvey={"form":$("#RepostForm"),"modal":$("#RepostAdModal")},this.dom.admarktUpsell=$(".admarkt-upsell")},"bindListeners":function(){var a=this;this.dom.showPromoteModalButton.on({"click":function(){Kj.initModalWindow({"modalID":a.dom.promoteModal})}}),this.dom.deleteAdLink.on({"click":function(b){b.preventDefault(),a.showDeleteModal()}}),this.dom.repostAdLink.on({"click":function(b){b.preventDefault(),a.showRepostModal()}}),this.dom.deleteSurvey.global.deleteModalForm.on({"submit":function(){if(!a.validateForm())return a.throwDeleteFormError(),!1}}),this.dom.$promoteCheckBoxes.on({"change":function(){a.toggleFeature($(this))}}),this.dom.admarktUpsell.on({"click":function(){Kj.Tracking.trackGAEvent({"action":"AdmarktUpsellClick"})}})},"toggleFeature":function(a){Kj.Tracking.api.TrackFeaturePurchase.trackFeatureClick(this.getFeatureName(a))},"getFeatureName":function(a){return a.attr("data-feature-name")},"hasEnabledFeatures":function(){return this.dom.$promoteCheckBoxes.filter(":checked").length>0},"enabledFeatureName":function(){return this.getFeatureName(this.getFirstEnabledFeature())},"getFirstEnabledFeature":function(){return this.dom.$promoteCheckBoxes.filter(":checked").eq(0)},"validateForm":function(){return Kj.Forms.initValidateForm({"form":this.dom.deleteSurvey.global.deleteModalForm,"showInputMessages":!1,"showBoxMessages":!1})},"throwDeleteFormError":function(){this.dom.deleteModalQuestionList.addClass("error"),this.dom.deleteModalQuestion.addClass("error")},"showDeleteModal":function(){Kj.initAdSurvey({"modal":this.dom.deleteSurvey.box.deleteModal,"surveyCopy":Kj.extVars.deleteSurvey,"ads":[this.opt],"onSubmit":_.bind(this.deleteAds,this)})},"deleteAds":function(a){function b(a,b){$("<input>").attr({"type":"hidden","name":"ads","value":JSON.stringify(b)}).appendTo(a)}var c=this.dom.deleteSurvey.box.$deleteForm;_.each(a,_.partial(b,c)),c.submit()},"repostAds":function(a){function b(a,b){$("<input>").attr({"type":"hidden","name":"ads","value":JSON.stringify(b)}).appendTo(a)}var c=this.dom.repostSurvey.form;_.each(a,_.partial(b,c)),c.submit()}},k={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.defaults(),this.cache(),this.bindListeners(),this.loadEmailAndNameFromLocalStorage(),Kj.Forms.initForm({"form":this.dom.form}),this.opt.formEnabled||this.disableForm()},"defaults":function(){this.emailBegin=!0,this.formEnabled=!0,this.formSubmit=!1,this.r2sBannerTagId="gpt-r2s-vip",this.R2S_EMAIL_LOCALSTORAGE_KEY="R2SEmail",this.R2S_NAME_LOCALSTORAGE_KEY="R2SName"},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.contactPosterAjaxUrl,"required":!0,"typeofString":"string","name":"contactPosterAjaxUrl"}),Kj.Utilities.verifyPassedArgs({"val":a.toggleCopyMeUrl,"required":!0,"typeofString":"string","name":"toggleCopyMeUrl"}),Kj.Utilities.verifyPassedArgs({"val":a.formEnabled,"required":!0,"typeofString":"boolean","name":"formEnabled"}),Kj.Utilities.verifyPassedArgs({"val":a.form,"required":!0,"typeofString":"object","name":"form"})},"cache":function(){this.dom={"form":this.opt.form,"contactLink":$("#ContactPosterButton"),"body":$("body"),"window":$(window),"header":$("#R2SBox > header, #R2SCasBox > header"),"content":$("#R2SBox >.content"),"verifyEmailButton":this.opt.form.find(".verify-button"),"changeEmailButton":this.opt.form.find(".change-button"),"verifyEmail":$("#viewad-contact-verifyEmail"),"verifyEmailContainer":this.opt.form.find(".verify-email"),"contactButton":$("#ContactPosterButton button"),"copyMe":$("#viewad-contact-sendcopy"),"inputs":this.opt.form.find("input[type='text'],textarea"),"emailField":$("#viewad-contact-from"),"nameField":$("#viewad-contact-from-name"),"replyLeaderboardAd":$("#R2SLeaderboard"),"vipLeaderboardAd":$("#VIPLeaderboard"),"postedLeaderboardAd":$("#PostedVipLeaderboard"),"r2sBox":$("#R2SBox, #R2SCasBox"),"r2sBoxContainer":$(".reply-box-container"),"safetyMessage":$("#R2SSafetyMessage")}},"bindListeners":function(){var a=this,b="fixed-on-scroll";a.dom.window.on({"scroll":function(c){a.dom.window.scrollTop()>=a.dom.r2sBox.offset().top&&!a.dom.r2sBoxContainer.hasClass("show")?a.dom.header.addClass(b):a.dom.header.removeClass(b)}}),a.dom.header.on({"click":function(b){a.dom.window.width()>960||(b.preventDefault(),a.dom.r2sBoxContainer.toggleClass("show"),a.dom.r2sBoxContainer.hasClass("show")&&setTimeout(function(){a.dom.body.animate({"scrollTop":a.dom.r2sBoxContainer.offset().top-10},400)},50))}}),a.dom.contactLink.on({"click":function(b){b.preventDefault(),a.submitForm()}}),a.dom.verifyEmailButton.on({"click":function(b){b.preventDefault(),a.verifyEmailAddress()}}),a.dom.changeEmailButton.on({"click":function(b){b.preventDefault(),a.changeEmailAddress()}}),a.dom.copyMe.on({"click":function(){a.toggleCopyMe()}}),a.dom.inputs.on({"focus":function(){a.trackEmailBegin()}}),a.dom.form.on({"submit":function(){return a.formSubmit||a.submitForm(),a.formSubmit}})},"loadEmailAndNameFromLocalStorage":function(){if(!Kj.extVars.loggedIn){var a=Kj.LocalStorage.getItem(this.R2S_NAME_LOCALSTORAGE_KEY),b=Kj.LocalStorage.getItem(this.R2S_EMAIL_LOCALSTORAGE_KEY);null!==a&&this.dom.nameField.val(a),null!==b&&this.dom.emailField.val(b)}},"storeEmailAndNameInLocalStorage":function(){if(!Kj.extVars.loggedIn){var a=this.dom.nameField.length>=1?this.dom.nameField.val().trim():"",b=this.dom.emailField.length>=1?this.dom.emailField.val().trim():"";""!==a&&Kj.LocalStorage.setItem(this.R2S_NAME_LOCALSTORAGE_KEY,a),""!==b&&Kj.LocalStorage.setItem(this.R2S_EMAIL_LOCALSTORAGE_KEY,b)}},"submitForm":function(){if(!0===this.formEnabled){if(!this.validateForm())return Kj.Tracking.trackGAEvent({"action":"R2SValidationError"}),!1;this.disableForm(),this.clearOptionalText(),this.storeEmailAndNameInLocalStorage(),this.dom.form.hasClass("jobs")&&Kj.Forms.api.UploadFile.hasFile()?this.contactPosterWithResume():this.contactPoster(this.dom.form.serialize())}},"validateForm":function(){return Kj.Forms.initValidateForm({"form":this.dom.form,"showInputMessages":!0,"showBoxMessages":!1})},"trackEmailBegin":function(){this.emailBegin&&(Kj.Tracking.trackGAEvent({"action":"R2SEmailBegin"}),this.emailBegin=!1)},"trackSuccessfulReply":function(a){Kj.Tracking.updateDataLayer({"param":{"m":{"t":"ASQ","hce":a.encryptedEmail}}}),Kj.Tracking.trackGAEvent({"action":"R2SEmailSuccess"})},"verifyEmailAddress":function(){Kj.Tracking.trackGAEvent({"action":"EmailDomainErrorResolve","label":"value=true;"}),this.dom.verifyEmail.val("false"),this.dom.verifyEmailContainer.hide(),this.enableForm(),this.submitForm()},"changeEmailAddress":function(){Kj.Tracking.trackGAEvent({"action":"EmailDomainErrorResolve","label":"value=false;"}),this.dom.verifyEmailContainer.hide(),this.dom.form.find(".error").removeClass("error"),this.dom.emailField.focus(),this.dom.emailField.addClass("error"),this.enableForm()},"trackValidationError":function(a){(!1===a.verifyEmail||!0===a.verifyEmail&&a.fieldErrors.length>=2)&&Kj.Tracking.trackGAEvent({"action":"R2SValidationError"})},"toggleCopyMe":function(){var a=this;$.ajax({"url":a.opt.toggleCopyMeUrl,"async":!1})},"contactPoster":function(a){var b=this;$.ajax({"type":"post","url":b.opt.contactPosterAjaxUrl,"data":a,"async":!1,"dataType":"json","success":function(a){b.contactPosterResponse(a)},"error":function(){Kj.Tracking.trackGAEvent({"action":"R2SEmailFail"})}})},"contactPosterWithResume":function(){var a=this;a.opt.fileUpload&&Kj.Vip.api.FileAttachment.fileUploading(),this.formSubmit=!0,this.dom.form.ajaxForm({"dataType":"json","success":function(b){a.contactPosterResponse(b)}}).submit()},"contactPosterResponse":function(a){this.formSubmit=!1,this.opt.fileUpload&&Kj.Vip.api.FileAttachment.clearStatus(),"OK"===a.status?this.contactPosterSuccess(a):this.contactPosterFail(a)},"contactPosterSuccess":function(a){this.trackSuccessfulReply(a),this.replyLeaderboard(),this.dom.r2sBoxContainer.removeClass("show"),Kj.initMessages({"setMessage":!0,"messageData":{"messageClass":"success","messageTextHeadline":a.successMsgHeadline,"messageText":a.successMsg,"links":[{"text":a.successLinkText,"url":a.successLinkUrl}]}}),this.resetForm()},"contactPosterFail":function(a){void 0!==a.errorMsg?(Kj.Tracking.trackGAEvent({"action":"R2SEmailFail"}),Kj.initMessages({"setMessage":!0,"messageData":{"messageClass":"error","messageText":a.errorMsg}})):(this.trackValidationError(a),Kj.Forms.initDisplayFormErrors({"form":this.dom.form,"showInputMessages":!0,"showBoxMessages":!1,"fieldErrors":a.fieldErrors})),a.verifyEmail?(Kj.Tracking.trackGAEvent({"action":"EmailDomainErrorBegin"}),this.dom.verifyEmailContainer.show()):this.enableForm()},"resetForm":function(){this.dom.form.find(".error").removeClass("error"),this.opt.fileUpload&&Kj.Vip.api.FileAttachment.resetFile(),this.dom.inputs.not(this.dom.emailField).not(this.dom.nameField).val(""),Kj.Forms.initForm({"form":this.dom.form})},"enableForm":function(){this.formEnabled=!0,Kj.Forms.api.Button.enableButton(this.dom.contactButton)},"disableForm":function(){this.formEnabled=!1,Kj.Forms.api.Button.disableButton(this.dom.contactButton)},"replyLeaderboard":function(){this.hidePostedLeaderboard(),this.isReplyLeaderboardDisplaying()?this.refreshReplyLeaderboard():this.displayReplyLeaderboard()},"isReplyLeaderboardDisplaying":function(){return!this.dom.replyLeaderboardAd.hasClass("hidden")},"refreshReplyLeaderboard":function(){!0===Kj.Banners.Banner.hasGptAdSlot(this.r2sBannerTagId)&&googletag.pubads().refresh([gptAdSlots[this.r2sBannerTagId].banner])},"displayReplyLeaderboard":function(){var a=this;this.dom.replyLeaderboardAd.removeClass("hidden"),this.dom.vipLeaderboardAd.addClass("hidden"),googletag.cmd.push(function(){!0===Kj.Banners.Banner.hasGptAdSlot(a.r2sBannerTagId)&&gptAdSlots[a.r2sBannerTagId].banner.setTargeting("pagetype","r2s"),googletag.display(a.r2sBannerTagId),googletag.pubads().refresh([gptAdSlots[a.r2sBannerTagId].banner])})},"hidePostedLeaderboard":function(){this.dom.postedLeaderboardAd.addClass("hidden")},"clearOptionalText":function(){var a=this;this.dom.inputs.each(function(){!0===a.shouldOptionalTextBeCleared($(this))&&$(this).val("")})},"shouldOptionalTextBeCleared":function(a){return void 0===a.attr("req")&&a.val()===a.attr("data-placeholder")}},l={"init":function(){this.cache(),this.bindListeners()},"cache":function(){this.dom={"otherAds":$("a.track-other-ads")}},"bindListeners":function(){this.dom.otherAds.on({"click":function(a){a.preventDefault();var b=$(this).attr("href");Kj.Tracking.trackGAEvent({"action":"ViewUsersOtherAds","delayHref":b,"event":a})}})}},m={"init":function(){this.cache(),this.bindListeners()},"cache":function(){this.dom={"similarAds":$("#similarAds table")}},"bindListeners":function(){this.dom.similarAds.on({"click":function(a){a.preventDefault();var b=$(this).attr("data-vip-id"),c=Math.ceil($(this).attr("data-vip-index")),d="posting_id="+b+";pos="+c,e=$(this).attr("data-vip-url");Kj.Tracking.trackGAEvent({"action":"ClickSimilarAd","delayHref":e,"label":d,"event":a})}})}},n={"init":function(){this.defaults(),this.cache(),this.bindListeners(),Kj.Forms.initUploadFileButton({"form":this.dom.form,"matchingExtensions":this.matchingExtensions,"callbackSuccessful":Kj.Vip.api.FileAttachment.addFile,"callbackUnsuccessful":Kj.Vip.api.FileAttachment.resetFile})},"defaults":function(){this.matchingExtensions="docx?|pdf|rtf|txt|x?html|jpg|jpeg|png|xlsx?|csv|gif"},"cache":function(){this.dom={"form":$("#R2SForm"),"fileInputWrapper":$(".file-input-wrapper"),"fileInputButtonContainer":$(".file-input-buttons"),"fileInputButton":$(".file-input-buttons button"),"fileInputField":$('.file-input-buttons input[type="file"]'),"fileInputCurrentWrapper":$(".file-input-current"),"fileInputCurrentFileName":$(".file-input-current .file-name"),"fileInputCurrentFileRemove":$(".file-input-current .file-remove"),"fileInputLabel":$("label[for='FileUploadInput']")}},"bindListeners":function(){var a=this;a.dom.fileInputCurrentFileRemove.on({"click":function(b){b.preventDefault(),a.removeFile()}})},"addFile":function(){this.dom.fileInputButtonContainer.hide(),this.dom.fileInputCurrentWrapper.show(),this.dom.fileInputCurrentFileName.html(Kj.Forms.api.UploadFile.getFilename())},"removeFile":function(){this.resetFile(),this.clearError()},"resetFile":function(){this.dom.fileInputCurrentWrapper.hide(),this.dom.fileInputButtonContainer.show(),this.dom.fileInputField.val(""),this.dom.fileInputCurrentFileName.html(""),this.clearStatus()},"clearError":function(){this.dom.fileInputWrapper.find(".error").removeClass("error")},"fileUploading":function(){this.dom.fileInputCurrentFileRemove.hide(),this.dom.fileInputCurrentWrapper.addClass("file-uploading")},"clearStatus":function(){this.dom.fileInputCurrentFileRemove.show(),this.dom.fileInputCurrentWrapper.removeClass("file-uploading")}},o={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.cache(),this.defaults(),Kj.Forms.initForm({"form":this.dom.$form}),this.bindListeners()},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.contactPosterAjaxUrl,"required":!0,"typeofString":"string","name":"contactPosterAjaxUrl"})},"defaults":function(){this.formEnabled=!0,this.emailBegin=!0},"cache":function(){this.dom={"$applyNow":$("#FinancingButton"),"$financingModal":$("#FinancialModal"),"$form":$("#FinanceForm"),"$contactButton":$("#FinancingSubmit"),"$bbListen":$("#FinanceForm .bbListen"),"$verifyEmail":$("#FinanceForm .verify-email"),"$verifyEmailInput":$("#FinanceVerifyEmailInput"),"$verifyEmailButton":$("#FinanceForm .verify-button"),"$changeEmailButton":$("#FinanceForm .change-button"),"$emailField":$("#FinanceEmail"),"$formInputs":$("#FinanceForm input")}},"bindListeners":function(){var a=this;this.dom.$form.on({"submit":function(){return a.formSubmit(),!1}}),this.dom.$verifyEmailButton.on({"click":function(b){b.preventDefault(),a.verifyEmailAddress()}}),this.dom.$changeEmailButton.on({"click":function(b){b.preventDefault(),a.changeEmailAddress()}}),this.dom.$formInputs.on({"focus":function(b){a.trackEmailBegin()}}),this.dom.$applyNow.on({"click":function(){a.showModal()}})},"showModal":function(){Kj.Tracking.trackGAEvent({"action":"FinancingApplyNow"}),Kj.initModalWindow({"modalID":this.dom.$financingModal,"formID":this.dom.$form,"clearForm":!0})},"formSubmit":function(){!0===this.formEnabled&&(Kj.Tracking.trackGAEvent({"action":"R2SFinancingAttempt"}),this.disableForm(),!0===this.validateForm()?this.replyForFinancing():(Kj.Tracking.trackGAEvent({"action":"R2SFinancingFail"}),this.enableForm()))},"validateForm":function(){return Kj.Forms.initValidateForm({"form":this.dom.$form,"showInputMessages":!0,"showBoxMessages":!1})},"replyForFinancing":function(){var a=this;$.ajax({"type":"post","url":a.opt.contactPosterAjaxUrl,"data":this.dom.$form.serialize(),"async":!1,"dataType":"json","success":function(b){a.replyForFinancingResponse(b)}})},"replyForFinancingResponse":function(a){"OK"===a.status?this.replyForFinancingSuccess(a):this.replyForFinancingFail(a)},"replyForFinancingSuccess":function(a){Kj.Tracking.trackGAEvent({"action":"R2SFinancingSuccess"}),Kj.api.ModalWindow.closeModalWindow(),Kj.initMessages({"setMessage":!0,"messageData":{"messageClass":"success","messageTextHeadline":a.successMsgHeadline,"messageText":a.successMsg,"links":[{"text":a.successLinkText,"url":a.successLinkUrl}]}})},"replyForFinancingFail":function(a){Kj.Tracking.trackGAEvent({"action":"R2SFinancingFail"}),void 0!==a.errorMsg?Kj.initMessages({"setMessage":!0,"messageData":{"messageClass":"error","messageText":a.errorMsg}}):Kj.Forms.initDisplayFormErrors({"form":this.dom.$form,"showInputMessages":!0,"showBoxMessages":!1,"fieldErrors":a.fieldErrors}),a.verifyEmail?(Kj.Tracking.trackGAEvent({"action":"EmailDomainErrorBegin"}),this.dom.$verifyEmail.show()):this.enableForm()},"enableForm":function(){this.formEnabled=!0,Kj.Forms.api.Button.enableButton(this.dom.$contactButton)},"disableForm":function(){this.formEnabled=!1,Kj.Forms.api.Button.disableButton(this.dom.$contactButton)},"verifyEmailAddress":function(){Kj.Tracking.trackGAEvent({"action":"EmailDomainErrorResolve","label":"value=true;"}),this.dom.$verifyEmailInput.val("false"),this.dom.$verifyEmail.hide(),this.enableForm(),this.formSubmit()},"changeEmailAddress":function(){Kj.Tracking.trackGAEvent({"action":"EmailDomainErrorResolve","label":"value=false;"}),this.dom.$verifyEmail.hide(),this.dom.$form.find(".error").removeClass("error"),this.dom.$emailField.focus(),this.dom.$emailField.addClass("error"),this.enableForm()},"trackEmailBegin":function(){this.emailBegin&&(Kj.Tracking.trackGAEvent({"action":"R2SFinancingBegin"}),this.emailBegin=!1)}},p=function(){function a(){t.$tabs=$(".tabs li"),t.$tabContent=$("#"+t.$tabs.parent().attr("data-tabs-content")),t.$accordions=t.$tabContent.children(".accordion"),t.$VIPbody=$("html, body"),t.$VIPwindow=$(window)}function b(){t.$tabs.on({"click":function(){d($(this))}}),t.$accordions.on({"click":function(){f($(this))}})}function c(){t.$tabs.removeClass("selected"),t.$accordions.removeClass("selected"),t.$tabContent.children(".tab").hide()}function d(a){!1===l(a)&&e(a)}function e(a){var b=t.$tabContent.children(".tab").eq(a.index());c(),a.addClass("selected"),b.show(),g(a),i(a,b)}function f(a){var b=a.next();if(!0===l(a))return a.removeClass("selected"),b.hide(),void h(a);c(),a.addClass("selected"),b.show(),!0===l(a)&&t.$VIPwindow.scrollTop()>=a.offset().top&&t.$VIPbody.animate({"scrollTop":a.offset().top-u},v),h(a),i(a,b)}function g(a){$("#"+a.attr("id").replace("tab-","accordion-")).addClass("selected")}function h(a){!0===l(a)?$("#"+a.attr("id").replace("accordion-","tab-")).addClass("selected"):e($("#tab-DESCRIPTION"))}function i(a,b){r=setInterval(function(){k(a,b)},100)}function j(a){return!m(a)||Kj.Banners.Banner.hasGptAdSlot(n(a))}function k(a,b){var c=a.attr("id");j(b)&&!0!==s[c]&&(!0===m(b)&&o(b),q(a),s[c]=!0,clearInterval(r))}function l(a){return a.hasClass("selected")}function m(a){return a.has(".tab-banner").length>0}function n(a){return a.find(".tab-banner").attr("id")}function o(a){var b=n(a);Kj.Banners.Banner.displayBanner(b),"undefined"!=typeof pbjs&&Kj.Banners.Banner.refresh(b)}function p(a){var b=a.data("tab-event");return void 0!==b&&""!==b?b+"TabClick":"TabClick"}function q(a){var b=a.data("campaign-id"),c={"action":p(a)};void 0!==b&&""!==b&&(c.label="campaignId="+b+";"),Kj.Tracking.trackGAEvent(c)}var r,s={},t={},u=10,v=200;return{"init":function(){s={},a(),b()}}}(),q={"init":function(a){this.opt=a,this.cache(),this.bindListeners()},"cache":function(){this.dom={"$imageButtons":$("#ShownImage.photo-navigation li[id!=VideoPlayer] img"),"$imageLink":$("#ImageLightBoxLink")}},"bindListeners":function(){var a=this;this.dom.$imageButtons.on({"click":function(b){b.preventDefault(),a.openLargeImageUrl()}})},"openLargeImageUrl":function(){this.dom.$imageLink.magnificPopup("open")}},r={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.displayed=!1,this.opened=!1,this.cache(),this.bindListeners()},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.gptSlot,"required":!0,"typeofString":"string","name":"gptSlot","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.tagId,"required":!0,"typeofString":"string","name":"tagId","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.gallerySize,"required":!0,"typeofString":"number","name":"gallerySize"}),Kj.Utilities.verifyPassedArgs({"val":a.closeMessage,"required":!0,"typeofString":"string","name":"closeMessage","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.prevMessage,"required":!0,"typeofString":"string","name":"prevMessage","lengthMin":!0}),
Kj.Utilities.verifyPassedArgs({"val":a.nextMessage,"required":!0,"typeofString":"string","name":"nextMessage","lengthMin":!0})},"cache":function(){this.dom={"$imageLink":$("#ImageLightBoxLink"),"$page":$("#PageVIP")}},"bindListeners":function(){var a=this;this.dom.$imageLink.magnificPopup({"items":a.opt.items,"gallery":{"enabled":a.opt.items.length>1,"tCounter":"%curr% / %total%","tPrev":a.opt.prevMessage,"tNext":a.opt.nextMessage},"type":"image","preloader":!1,"tClose":a.opt.closeMessage,"fixedContentPos":!0,"showCloseBtn":!0,"closeBtnInside":!1,"closeOnBgClick":!0,"callbacks":{"beforeOpen":function(){Kj.Vip.api.VideoPlayer.remove(),this.index=Kj.Vip.api.PhotoNavigation.getPhotoIndex()},"open":function(){a.opened=!0,$("#ImageLeaderBoard").length||$(".mfp-wrap").prepend('<div id="ImageLeaderBoard"></div>'),Kj.Vip.api.ImageLightBoxDisplayAd.display()},"close":function(){a.opened=!1,$("#ImageLeaderBoard").detach()}},"iframe":{"patterns":{"youtube":{"index":"youtube.com","id":"v=","src":"//www.youtube.com/embed/%id%?autoplay=1&fs=0&modestbranding=1&rel=0"}}}})},"display":function(){if(this.displayed)return void this.refresh();this.fireGATracking(),Kj.Banners.Banner.displayBanner(this.opt.tagId),this.refresh(),this.displayed=!0},"fireGATracking":function(){var a=this;Kj.Tracking.trackGAEvent({"action":"ViewLargerImageClick","label":"photo_count="+a.opt.gallerySize+";"})},"refresh":function(){!0===Kj.Banners.Banner.hasGptAdSlot(this.opt.tagId)&&googletag.pubads().refresh([gptAdSlots[this.opt.tagId].banner])}},s=function(){function a(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.counterAjaxUrl,"required":!0,"typeofString":"string","name":"counterAjaxUrl"}),Kj.Utilities.verifyPassedArgs({"val":a.adId,"required":!0,"typeofString":"string","name":"adId"})}function b(){f.applyOnline={"$button":$("#ApplicationLink"),"$xsrfToken":$("#applicationLinkXsrf")},f.comFree={"$button":$("#ComfreeLink, #ComfreeLinkLogo"),"$xsrfToken":$("#comfreeLinkXsrf")}}function c(){f.applyOnline.$button.on({"click":function(){d(f.applyOnline.$xsrfToken)}}),f.comFree.$button.on({"click":function(){d(f.comFree.$xsrfToken)}})}function d(a){$.ajax({"url":e.counterAjaxUrl,"type":"POST","data":{"adId":e.adId,"counterType":"VIP_CLICK_OUT","ca.kijiji.xsrf.token":a.val()},"complete":function(){return!0}})}var e,f={};return{"init":function(d){a(d),e=d,b(),c()}}}(),t=function(){var a={},b=function(){a.$facebookShareButton=$("#MessageContainer .cta-share-fb")},c=function(){a.$facebookShareButton.on("click",function(a){a.preventDefault(),window.open(this.href,"_blank","width=555px,height=661px").opener=null})};return{"init":function(){b(),c()}}}();return{"test":{"AdActions":a,"PhotoSelector":f,"R2SBox":k,"PhotoNavigation":e,"AdCounter":i,"ReportAd":d,"VideoPlayer":g,"ManageAd":j,"C2CPhone":h,"DealerLink":c,"FileAttachment":n,"PosterContactInfo":l,"SimilarAds":m,"VIPSubPages":q,"FinancingTab":o},"Tabs":p,"initAdActions":function(b){a.init(b)},"initPhotoNavigation":function(a){e.init(a)},"initPhotoSelector":function(a){f.init(a)},"initAdCounter":function(a){i.init(a)},"initReportAd":function(a){d.init(a)},"initVideoPlayer":function(){var a=g.init();return{"setPlayer":function(){a.setPlayer()},"removePlayer":function(){a.removePlayer()}}},"initManageAd":function(a){j.init(a)},"initC2CPhone":function(a){h.init(a)},"initR2SBox":function(a){k.init(a)},"initDealerLink":function(a){c.init(a)},"initFileAttachment":function(){n.init()},"initPosterContactInfo":function(){l.init()},"initVipClickOutCounter":function(a){s.init(a)},"initSimilarAds":function(){m.init()},"initVIPSubPages":function(a){q.init(a)},"initFinancingTab":function(a){o.init(a)},"initImageLightBoxDisplayAd":function(a){r.init(a)},"initPrintPage":function(a){b.init(a)},"FacebookShareAdModal":t,"api":{"FileAttachment":{"resetFile":function(){n.resetFile()},"fileUploading":function(){n.fileUploading()},"clearStatus":function(){n.clearStatus()},"addFile":function(){n.addFile()}},"PhotoNavigation":{"getPhotoIndex":function(){return e.photoIndex},"setPhotoIndex":function(a){e.photoIndex=a},"changeImage":function(){e.changeImage()}},"ManageAd":{"showDeleteModal":function(){j.showDeleteModal()},"hasEnabledFeatures":function(){return j.hasEnabledFeatures()},"enabledFeatureName":function(){return j.enabledFeatureName()}},"VideoPlayer":{"remove":function(){g.removePlayer()}},"ImageLightBoxDisplayAd":{"display":function(){r.display()}},"VIPSubPages":{"open":function(){q.openLargeImageUrl()}}}}}();;!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(a){var b,c,d,e,f,g,h="Close",i="BeforeClose",j="AfterClose",k="BeforeAppend",l="MarkupParse",m="Open",n="Change",o="mfp",p="."+o,q="mfp-ready",r="mfp-removing",s="mfp-prevent-close",t=function(){},u=!!window.jQuery,v=a(window),w=function(a,c){b.ev.on(o+a+p,c)},x=function(b,c,d,e){var f=document.createElement("div");return f.className="mfp-"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},y=function(c,d){b.ev.triggerHandler(o+c,d),b.st.callbacks&&(c=c.charAt(0).toLowerCase()+c.slice(1),b.st.callbacks[c]&&b.st.callbacks[c].apply(b,a.isArray(d)?d:[d]))},z=function(c){return c===g&&b.currTemplate.closeBtn||(b.currTemplate.closeBtn=a(b.st.closeMarkup.replace("%title%",b.st.tClose)),g=c),b.currTemplate.closeBtn},A=function(){a.magnificPopup.instance||(b=new t,b.init(),a.magnificPopup.instance=b)},B=function(){var a=document.createElement("p").style,b=["ms","O","Moz","Webkit"];if(void 0!==a.transition)return!0;for(;b.length;)if(b.pop()+"Transition"in a)return!0;return!1};t.prototype={"constructor":t,"init":function(){var c=navigator.appVersion;b.isIE7=-1!==c.indexOf("MSIE 7."),b.isIE8=-1!==c.indexOf("MSIE 8."),b.isLowIE=b.isIE7||b.isIE8,b.isAndroid=/android/gi.test(c),b.isIOS=/iphone|ipad|ipod/gi.test(c),b.supportsTransition=B(),b.probablyMobile=b.isAndroid||b.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),d=a(document),b.popupsCache={}},"open":function(c){var e;if(!1===c.isObj){b.items=c.items.toArray(),b.index=0;var g,h=c.items;for(e=0;e<h.length;e++)if(g=h[e],g.parsed&&(g=g.el[0]),g===c.el[0]){b.index=e;break}}else b.items=a.isArray(c.items)?c.items:[c.items],b.index=c.index||0;if(b.isOpen)return void b.updateItemHTML();b.types=[],f="",c.mainEl&&c.mainEl.length?b.ev=c.mainEl.eq(0):b.ev=d,c.key?(b.popupsCache[c.key]||(b.popupsCache[c.key]={}),b.currTemplate=b.popupsCache[c.key]):b.currTemplate={},b.st=a.extend(!0,{},a.magnificPopup.defaults,c),b.fixedContentPos="auto"===b.st.fixedContentPos?!b.probablyMobile:b.st.fixedContentPos,b.st.modal&&(b.st.closeOnContentClick=!1,b.st.closeOnBgClick=!1,b.st.showCloseBtn=!1,b.st.enableEscapeKey=!1),b.bgOverlay||(b.bgOverlay=x("bg").on("click"+p,function(){b.close()}),b.wrap=x("wrap").attr("tabindex",-1).on("click"+p,function(a){b._checkIfClose(a.target)&&b.close()}),b.container=x("container",b.wrap)),b.contentContainer=x("content"),b.st.preloader&&(b.preloader=x("preloader",b.container,b.st.tLoading));var i=a.magnificPopup.modules;for(e=0;e<i.length;e++){var j=i[e];j=j.charAt(0).toUpperCase()+j.slice(1),b["init"+j].call(b)}y("BeforeOpen"),b.st.showCloseBtn&&(b.st.closeBtnInside?(w(l,function(a,b,c,d){c.close_replaceWith=z(d.type)}),f+=" mfp-close-btn-in"):b.wrap.append(z())),b.st.alignTop&&(f+=" mfp-align-top"),b.fixedContentPos?b.wrap.css({"overflow":b.st.overflowY,"overflowX":"hidden","overflowY":b.st.overflowY}):b.wrap.css({"top":v.scrollTop(),"position":"absolute"}),(!1===b.st.fixedBgPos||"auto"===b.st.fixedBgPos&&!b.fixedContentPos)&&b.bgOverlay.css({"height":d.height(),"position":"absolute"}),b.st.enableEscapeKey&&d.on("keyup"+p,function(a){27===a.keyCode&&b.close()}),v.on("resize"+p,function(){b.updateSize()}),b.st.closeOnContentClick||(f+=" mfp-auto-cursor"),f&&b.wrap.addClass(f);var k=b.wH=v.height(),n={};if(b.fixedContentPos&&b._hasScrollBar(k)){var o=b._getScrollbarSize();o&&(n.marginRight=o)}b.fixedContentPos&&(b.isIE7?a("body, html").css("overflow","hidden"):n.overflow="hidden");var r=b.st.mainClass;return b.isIE7&&(r+=" mfp-ie7"),r&&b._addClassToMFP(r),b.updateItemHTML(),y("BuildControls"),a("html").css(n),b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo||a(document.body)),b._lastFocusedEl=document.activeElement,setTimeout(function(){b.content?(b._addClassToMFP(q),b._setFocus()):b.bgOverlay.addClass(q),d.on("focusin"+p,b._onFocusIn)},16),b.isOpen=!0,b.updateSize(k),y(m),c},"close":function(){b.isOpen&&(y(i),b.isOpen=!1,b.st.removalDelay&&!b.isLowIE&&b.supportsTransition?(b._addClassToMFP(r),setTimeout(function(){b._close()},b.st.removalDelay)):b._close())},"_close":function(){y(h);var c=r+" "+q+" ";if(b.bgOverlay.detach(),b.wrap.detach(),b.container.empty(),b.st.mainClass&&(c+=b.st.mainClass+" "),b._removeClassFromMFP(c),b.fixedContentPos){var e={"marginRight":""};b.isIE7?a("body, html").css("overflow",""):e.overflow="",a("html").css(e)}d.off("keyup"+p+" focusin"+p),b.ev.off(p),b.wrap.attr("class","mfp-wrap").removeAttr("style"),b.bgOverlay.attr("class","mfp-bg"),b.container.attr("class","mfp-container"),!b.st.showCloseBtn||b.st.closeBtnInside&&!0!==b.currTemplate[b.currItem.type]||b.currTemplate.closeBtn&&b.currTemplate.closeBtn.detach(),b._lastFocusedEl&&a(b._lastFocusedEl).focus(),b.currItem=null,b.content=null,b.currTemplate=null,b.prevHeight=0,y(j)},"updateSize":function(a){if(b.isIOS){var c=document.documentElement.clientWidth/window.innerWidth,d=window.innerHeight*c;b.wrap.css("height",d),b.wH=d}else b.wH=a||v.height();b.fixedContentPos||b.wrap.css("height",b.wH),y("Resize")},"updateItemHTML":function(){var c=b.items[b.index];b.contentContainer.detach(),b.content&&b.content.detach(),c.parsed||(c=b.parseEl(b.index));var d=c.type;if(y("BeforeChange",[b.currItem?b.currItem.type:"",d]),b.currItem=c,!b.currTemplate[d]){var f=!!b.st[d]&&b.st[d].markup;y("FirstMarkupParse",f),b.currTemplate[d]=!f||a(f)}e&&e!==c.type&&b.container.removeClass("mfp-"+e+"-holder");var g=b["get"+d.charAt(0).toUpperCase()+d.slice(1)](c,b.currTemplate[d]);b.appendContent(g,d),c.preloaded=!0,y(n,c),e=c.type,b.container.prepend(b.contentContainer),y("AfterChange")},"appendContent":function(a,c){b.content=a,a?b.st.showCloseBtn&&b.st.closeBtnInside&&!0===b.currTemplate[c]?b.content.find(".mfp-close").length||b.content.append(z()):b.content=a:b.content="",y(k),b.container.addClass("mfp-"+c+"-holder"),b.contentContainer.append(b.content)},"parseEl":function(c){var d,e=b.items[c];if(e.tagName?e={"el":a(e)}:(d=e.type,e={"data":e,"src":e.src}),e.el){for(var f=b.types,g=0;g<f.length;g++)if(e.el.hasClass("mfp-"+f[g])){d=f[g];break}e.src=e.el.attr("data-mfp-src"),e.src||(e.src=e.el.attr("href"))}return e.type=d||b.st.type||"inline",e.index=c,e.parsed=!0,b.items[c]=e,y("ElementParse",e),b.items[c]},"addGroup":function(a,c){var d=function(d){d.mfpEl=this,b._openClick(d,a,c)};c||(c={});var e="click.magnificPopup";c.mainEl=a,c.items?(c.isObj=!0,a.off(e).on(e,d)):(c.isObj=!1,c.delegate?a.off(e).on(e,c.delegate,d):(c.items=a,a.off(e).on(e,d)))},"_openClick":function(c,d,e){if((void 0!==e.midClick?e.midClick:a.magnificPopup.defaults.midClick)||2!==c.which&&!c.ctrlKey&&!c.metaKey){var f=void 0!==e.disableOn?e.disableOn:a.magnificPopup.defaults.disableOn;if(f)if(a.isFunction(f)){if(!f.call(b))return!0}else if(v.width()<f)return!0;c.type&&(c.preventDefault(),b.isOpen&&c.stopPropagation()),e.el=a(c.mfpEl),e.delegate&&(e.items=d.find(e.delegate)),b.open(e)}},"updateStatus":function(a,d){if(b.preloader){c!==a&&b.container.removeClass("mfp-s-"+c),d||"loading"!==a||(d=b.st.tLoading);var e={"status":a,"text":d};y("UpdateStatus",e),a=e.status,d=e.text,b.preloader.html(d),b.preloader.find("a").on("click",function(a){a.stopImmediatePropagation()}),b.container.addClass("mfp-s-"+a),c=a}},"_checkIfClose":function(c){if(!a(c).hasClass(s)){var d=b.st.closeOnContentClick,e=b.st.closeOnBgClick;if(d&&e)return!0;if(!b.content||a(c).hasClass("mfp-close")||b.preloader&&c===b.preloader[0])return!0;if(c===b.content[0]||a.contains(b.content[0],c)){if(d)return!0}else if(e&&a.contains(document,c))return!0;return!1}},"_addClassToMFP":function(a){b.bgOverlay.addClass(a),b.wrap.addClass(a)},"_removeClassFromMFP":function(a){this.bgOverlay.removeClass(a),b.wrap.removeClass(a)},"_hasScrollBar":function(a){return(b.isIE7?d.height():document.body.scrollHeight)>(a||v.height())},"_setFocus":function(){(b.st.focus?b.content.find(b.st.focus).eq(0):b.wrap).focus()},"_onFocusIn":function(c){if(c.target!==b.wrap[0]&&!a.contains(b.wrap[0],c.target))return b._setFocus(),!1},"_parseMarkup":function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),y(l,[b,c,d]),a.each(c,function(a,c){if(void 0===c||!1===c)return!0;if(e=a.split("_"),e.length>1){var d=b.find(p+"-"+e[0]);if(d.length>0){var f=e[1];"replaceWith"===f?d[0]!==c[0]&&d.replaceWith(c):"img"===f?d.is("img")?d.attr("src",c):d.replaceWith('<img src="'+c+'" class="'+d.attr("class")+'" />'):d.attr(e[1],c)}}else b.find(p+"-"+a).html(c)})},"_getScrollbarSize":function(){if(void 0===b.scrollbarSize){var a=document.createElement("div");a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a),b.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return b.scrollbarSize}},a.magnificPopup={"instance":null,"proto":t.prototype,"modules":[],"open":function(b,c){return A(),b=b?a.extend(!0,{},b):{},b.isObj=!0,b.index=c||0,this.instance.open(b)},"close":function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},"registerModule":function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},"defaults":{"disableOn":0,"key":null,"midClick":!1,"mainClass":"","preloader":!0,"focus":"","closeOnContentClick":!1,"closeOnBgClick":!0,"closeBtnInside":!0,"showCloseBtn":!0,"enableEscapeKey":!0,"modal":!1,"alignTop":!1,"removalDelay":0,"prependTo":null,"fixedContentPos":"auto","fixedBgPos":"auto","overflowY":"auto","closeMarkup":'<button title="%title%" type="button" class="mfp-close">&times;</button>',"tClose":"Close (Esc)","tLoading":"Loading..."}},a.fn.magnificPopup=function(c){A();var d=a(this);if("string"==typeof c)if("open"===c){var e,f=u?d.data("magnificPopup"):d[0].magnificPopup,g=parseInt(arguments[1],10)||0;f.items?e=f.items[g]:(e=d,f.delegate&&(e=e.find(f.delegate)),e=e.eq(g)),b._openClick({"mfpEl":e},d,f)}else b.isOpen&&b[c].apply(b,Array.prototype.slice.call(arguments,1));else c=a.extend(!0,{},c),u?d.data("magnificPopup",c):d[0].magnificPopup=c,b.addGroup(d,c);return d};var C,D,E,F="inline",G=function(){E&&(D.after(E.addClass(C)).detach(),E=null)};a.magnificPopup.registerModule(F,{"options":{"hiddenClass":"hide","markup":"","tNotFound":"Content not found"},"proto":{"initInline":function(){b.types.push(F),w(h+"."+F,function(){G()})},"getInline":function(c,d){if(G(),c.src){var e=b.st.inline,f=a(c.src);if(f.length){var g=f[0].parentNode;g&&g.tagName&&(D||(C=e.hiddenClass,D=x(C),C="mfp-"+C),E=f.after(D).detach().removeClass(C)),b.updateStatus("ready")}else b.updateStatus("error",e.tNotFound),f=a("<div>");return c.inlineElement=f,f}return b.updateStatus("ready"),b._parseMarkup(d,{},c),d}}});var H,I=function(c){if(c.data&&void 0!==c.data.title)return c.data.title;var d=b.st.image.titleSrc;if(d){if(a.isFunction(d))return d.call(b,c);if(c.el)return c.el.attr(d)||""}return""};a.magnificPopup.registerModule("image",{"options":{"markup":'<div><div class="mfp-counter">&nbsp;</div><div class="mfp-figure"><figure><div class="mfp-img"></div></figure></div></div>',"cursor":"mfp-zoom-out-cur","titleSrc":"title","verticalFit":!1,"tError":'<a href="%url%">The image</a> could not be loaded.'},"proto":{"initImage":function(){var c=b.st.image,d=".image";b.types.push("image"),w(m+d,function(){"image"===b.currItem.type&&c.cursor&&a(document.body).addClass(c.cursor)}),w(h+d,function(){c.cursor&&a(document.body).removeClass(c.cursor),v.off("resize"+p)}),w("Resize"+d,b.resizeImage),b.isLowIE&&w("AfterChange",b.resizeImage)},"resizeImage":function(){var a=b.currItem;if(a&&a.img&&b.st.image.verticalFit){var c=0;b.isLowIE&&(c=parseInt(a.img.css("padding-top"),10)+parseInt(a.img.css("padding-bottom"),10)),a.img.css("height",b.wH-c)}},"_onImageHasSize":function(a){a.img&&(a.hasSize=!0,H&&clearInterval(H),a.isCheckingImgSize=!1,y("ImageHasSize",a),a.imgHidden&&(b.content&&b.content.removeClass("mfp-loading"),a.imgHidden=!1))},"findImageSize":function(a){var c=0,d=a.img[0],e=function(f){H&&clearInterval(H),H=setInterval(function(){if(d.naturalWidth>0)return void b._onImageHasSize(a);c>200&&clearInterval(H),c++,3===c?e(10):40===c?e(50):100===c&&e(500)},f)};e(1)},"getImage":function(c,d){var e=0,f=function(){c&&(c.img[0].complete?(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("ready")),c.hasSize=!0,c.loaded=!0,y("ImageLoadComplete")):(e++,e<200?setTimeout(f,100):g()))},g=function(){c&&(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("error",h.tError.replace("%url%",c.src))),c.hasSize=!0,c.loaded=!0,c.loadError=!0)},h=b.st.image,i=d.find(".mfp-img");if(i.length){var j=document.createElement("img");j.className="mfp-img",c.el&&c.el.find("img").length&&(j.alt=c.el.find("img").attr("alt")),c.img=a(j).on("load.mfploader",f).on("error.mfploader",g),j.src=c.src,i.is("img")&&(c.img=c.img.clone()),j=c.img[0],j.naturalWidth>0?c.hasSize=!0:j.width||(c.hasSize=!1)}return b._parseMarkup(d,{"title":I(c),"img_replaceWith":c.img},c),b.resizeImage(),c.hasSize?(H&&clearInterval(H),c.loadError?(d.addClass("mfp-loading"),b.updateStatus("error",h.tError.replace("%url%",c.src))):(d.removeClass("mfp-loading"),b.updateStatus("ready")),d):(b.updateStatus("loading"),c.loading=!0,c.hasSize||(c.imgHidden=!0,d.addClass("mfp-loading"),b.findImageSize(c)),d)}}});var J,K=function(){return void 0===J&&(J=void 0!==document.createElement("p").style.MozTransform),J};a.magnificPopup.registerModule("zoom",{"options":{"enabled":!1,"easing":"ease-in-out","duration":300,"opener":function(a){return a.is("img")?a:a.find("img")}},"proto":{"initZoom":function(){var a,c=b.st.zoom,d=".zoom";if(c.enabled&&b.supportsTransition){var e,f,g=c.duration,j=function(a){var b=a.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),d="all "+c.duration/1e3+"s "+c.easing,e={"position":"fixed","zIndex":9999,"left":0,"top":0,"-webkit-backface-visibility":"hidden"},f="transition";return e["-webkit-"+f]=e["-moz-"+f]=e["-o-"+f]=e[f]=d,b.css(e),b},k=function(){b.content.css("visibility","visible")};w("BuildControls"+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.content.css("visibility","hidden"),!(a=b._getItemToZoom()))return void k();f=j(a),f.css(b._getOffset()),b.wrap.append(f),e=setTimeout(function(){f.css(b._getOffset(!0)),e=setTimeout(function(){k(),setTimeout(function(){f.remove(),a=f=null,y("ZoomAnimationEnded")},16)},g)},16)}}),w(i+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.st.removalDelay=g,!a){if(!(a=b._getItemToZoom()))return;f=j(a)}f.css(b._getOffset(!0)),b.wrap.append(f),b.content.css("visibility","hidden"),setTimeout(function(){f.css(b._getOffset())},16)}}),w(h+d,function(){b._allowZoom()&&(k(),f&&f.remove(),a=null)})}},"_allowZoom":function(){return"image"===b.currItem.type},"_getItemToZoom":function(){return!!b.currItem.hasSize&&b.currItem.img},"_getOffset":function(c){var d;d=c?b.currItem.img:b.st.zoom.opener(b.currItem.el||b.currItem);var e=d.offset(),f=parseInt(d.css("padding-top"),10),g=parseInt(d.css("padding-bottom"),10);e.top-=a(window).scrollTop()-f;var h={"width":d.width(),"height":(u?d.innerHeight():d[0].offsetHeight)-g-f};return K()?h["-moz-transform"]=h.transform="translate("+e.left+"px,"+e.top+"px)":(h.left=e.left,h.top=e.top),h}}});var L="iframe",M="//about:blank",N=function(a){if(b.currTemplate[L]){var c=b.currTemplate[L].find("iframe");c.length&&(a||(c[0].src=M),b.isIE8&&c.css("display",a?"block":"none"))}};a.magnificPopup.registerModule(L,{"options":{"markup":'<div class="mfp-iframe-scaler"><div class="mfp-counter"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',"srcAction":"iframe_src","patterns":{"youtube":{"index":"youtube.com","id":"v=","src":"//www.youtube.com/embed/%id%?autoplay=1"},"vimeo":{"index":"vimeo.com/","id":"/","src":"//player.vimeo.com/video/%id%?autoplay=1"},"gmaps":{"index":"//maps.google.","src":"%id%&output=embed"}}},"proto":{"initIframe":function(){b.types.push(L),w("BeforeChange",function(a,b,c){b!==c&&(b===L?N():c===L&&N(!0))}),w(h+"."+L,function(){N()})},"getIframe":function(c,d){var e=c.src,f=b.st.iframe;a.each(f.patterns,function(){if(e.indexOf(this.index)>-1)return this.id&&(e="string"==typeof this.id?e.substr(e.lastIndexOf(this.id)+this.id.length,e.length):this.id.call(this,e)),e=this.src.replace("%id%",e),!1});var g={};return f.srcAction&&(g[f.srcAction]=e),b._parseMarkup(d,g,c),b.updateStatus("ready"),d}}});var O=function(a){var c=b.items.length;return a>c-1?a-c:a<0?c+a:a},P=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)};a.magnificPopup.registerModule("gallery",{"options":{"enabled":!1,"arrowMarkup":'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',"preload":[0,2],"navigateByImgClick":!0,"arrows":!0,"tPrev":"Previous (Left arrow key)","tNext":"Next (Right arrow key)","tCounter":"%curr% of %total%"},"proto":{"initGallery":function(){var c=b.st.gallery,e=".mfp-gallery",g=Boolean(a.fn.mfpFastClick);if(b.direction=!0,!c||!c.enabled)return!1;f+=" mfp-gallery",w(m+e,function(){c.navigateByImgClick&&b.wrap.on("click"+e,".mfp-img",function(){if(b.items.length>1)return b.next(),!1}),d.on("keydown"+e,function(a){37===a.keyCode?b.prev():39===a.keyCode&&b.next()})}),w("UpdateStatus"+e,function(a,c){c.text&&(c.text=P(c.text,b.currItem.index,b.items.length))}),w(l+e,function(a,d,e,f){var g=b.items.length;e.counter=g>1?P(c.tCounter,f.index,g):""}),w("BuildControls"+e,function(){if(b.items.length>1&&c.arrows&&!b.arrowLeft){var d=c.arrowMarkup,e=b.arrowLeft=a(d.replace(/%title%/gi,c.tPrev).replace(/%dir%/gi,"left")).addClass(s),f=b.arrowRight=a(d.replace(/%title%/gi,c.tNext).replace(/%dir%/gi,"right")).addClass(s),h=g?"mfpFastClick":"click";e[h](function(){b.prev()}),f[h](function(){b.next()}),b.isIE7&&(x("b",e[0],!1,!0),x("a",e[0],!1,!0),x("b",f[0],!1,!0),x("a",f[0],!1,!0)),b.container.append(e.add(f))}}),w(n+e,function(){b._preloadTimeout&&clearTimeout(b._preloadTimeout),b._preloadTimeout=setTimeout(function(){b.preloadNearbyImages(),b._preloadTimeout=null},16)}),w(h+e,function(){d.off(e),b.wrap.off("click"+e),b.arrowLeft&&g&&b.arrowLeft.add(b.arrowRight).destroyMfpFastClick(),b.arrowRight=b.arrowLeft=null})},"next":function(){b.direction=!0,b.index=O(b.index+1),b.updateItemHTML()},"prev":function(){b.direction=!1,b.index=O(b.index-1),b.updateItemHTML()},"goTo":function(a){b.direction=a>=b.index,b.index=a,b.updateItemHTML()},"preloadNearbyImages":function(){var a,c=b.st.gallery.preload,d=Math.min(c[0],b.items.length),e=Math.min(c[1],b.items.length);for(a=1;a<=(b.direction?e:d);a++)b._preloadItem(b.index+a);for(a=1;a<=(b.direction?d:e);a++)b._preloadItem(b.index-a)},"_preloadItem":function(c){if(c=O(c),!b.items[c].preloaded){var d=b.items[c];d.parsed||(d=b.parseEl(c)),y("LazyLoad",d),"image"===d.type&&(d.img=a('<img class="mfp-img" />').on("load.mfploader",function(){d.hasSize=!0}).on("error.mfploader",function(){d.hasSize=!0,d.loadError=!0,y("LazyLoadError",d)}).attr("src",d.src)),d.preloaded=!0}}}}),function(){var b="ontouchstart"in window,c=function(){v.off("touchmove"+e+" touchend"+e)},d="mfpFastClick",e="."+d;a.fn.mfpFastClick=function(d){return a(this).each(function(){var f,g=a(this);if(b){var h,i,j,k,l,m;g.on("touchstart"+e,function(a){k=!1,m=1,l=a.originalEvent?a.originalEvent.touches[0]:a.touches[0],i=l.clientX,j=l.clientY,v.on("touchmove"+e,function(a){l=a.originalEvent?a.originalEvent.touches:a.touches,m=l.length,l=l[0],(Math.abs(l.clientX-i)>10||Math.abs(l.clientY-j)>10)&&(k=!0,c())}).on("touchend"+e,function(a){c(),k||m>1||(f=!0,a.preventDefault(),clearTimeout(h),h=setTimeout(function(){f=!1},1e3),d())})})}g.on("click"+e,function(){f||d()})})},a.fn.destroyMfpFastClick=function(){a(this).off("touchstart"+e+" click"+e),b&&v.off("touchmove"+e+" touchend"+e)}}(),A()});;Kj.Map=function(){"use strict";var a={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.mapLoaded=!1,this.mapLoading=!1,this.circleRadius=500,this.cache(),this.bindListeners()},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.latitude,"required":!0,"typeofString":"number","name":"latitude"}),Kj.Utilities.verifyPassedArgs({"val":a.longitude,"required":!0,"typeofString":"number","name":"longitude"}),Kj.Utilities.verifyPassedArgs({"val":a.address,"required":!0,"typeofString":"string","name":"address"}),Kj.Utilities.verifyPassedArgs({"val":a.googleMapsUrl,"required":!0,"typeofString":"string","name":"googleMapsUrl"}),Kj.Utilities.verifyPassedArgs({"val":a.isPostalCode,"required":!0,"typeofString":"boolean","name":"isPostalCode"}),Kj.Utilities.verifyPassedArgs({"val":a.markerImage,"required":!1,"typeofString":"string","name":"markerImage"}),Kj.Utilities.verifyPassedArgs({"val":a.markerSize,"required":!1,"typeofString":"object","name":"markerSize"}),Kj.Utilities.verifyPassedArgs({"val":a.markerCenter,"required":!1,"typeofString":"object","name":"markerCenter"}),Kj.Utilities.verifyPassedArgs({"val":a.markerUrl,"required":!1,"typeofString":"string","name":"markerUrl"}),Kj.Utilities.verifyPassedArgs({"val":a.addressPriority,"required":!1,"typeofString":"boolean","name":"addressPriority"})},"cache":function(){this.dom={"$body":$("body")}},"bindListeners":function(){var a=this;this.dom.$body.on({"click":function(){a.openDirectionsWindow()}},".view-directions")},"setMap":function(a){var b={"center":a,"zoom":14,"mapTypeId":google.maps.MapTypeId.ROADMAP,"scrollwheel":!0};this.map=new google.maps.Map(document.getElementById("MapCanvas"),b),this.isPostalCode()?(this.setCircle(a),this.bindMapZoom()):(this.setMarker(a),this.bindMarkerClick()),this.bindMapResize()},"isPostalCode":function(){return!0===this.opt.isPostalCode},"isAddress":function(){return!0===this.opt.addressPriority||0===this.opt.latitude&&0===this.opt.longitude},"getGeocode":function(){var a=this;(new google.maps.Geocoder).geocode({"address":this.opt.address},function(b,c){c===google.maps.GeocoderStatus.OK&&a.setMap(b[0].geometry.location)})},"setupMap":function(){if(!0===this.isAddress())this.getGeocode();else{var a=new google.maps.LatLng(this.opt.latitude,this.opt.longitude);this.setMap(a)}},"setMarker":function(a){var b=this.opt.markerUrl+this.opt.markerImage,c=new google.maps.MarkerImage(b,new google.maps.Size(this.opt.markerSize.width,this.opt.markerSize.height),new google.maps.Point(0,0),new google.maps.Point(this.opt.markerCenter.left,this.opt.markerCenter.top)),d=this;this.marker=new google.maps.Marker({"map":d.map,"draggable":!1,"position":a,"icon":c,"animation":google.maps.Animation.DROP,"optimized":!1}),this.setInfoWindow()},"setCircle":function(a){this.circle=new google.maps.Circle({"strokeColor":"#0000ff","strokeOpacity":.4,"strokeWeight":2,"fillColor":"#0000ff","fillOpacity":.35,"map":this.map,"center":a,"radius":this.circleRadius}),this.map.setOptions({"maxZoom":16})},"setInfoWindow":function(){var a=this;this.infoWindow=new google.maps.InfoWindow({"content":a.infoContentString()})},"infoContentString":function(){return Kj.Utilities.useTemplate({"template":"infoWindowContent","data":{"address":this.opt.address,"viewDirections":Kj.extVars.viewDirections}})},"openDirectionsWindow":function(){var a="http://maps.google.com/maps?daddr="+encodeURI(this.opt.address.replace(/ /g,"+"))+"&hl="+Kj.extVars.locale;window.open(a,"AdMapGoogle")},"bindMarkerClick":function(){var a=this;google.maps.event.addListener(this.marker,"click",function(){a.infoWindow.open(a.map,a.marker)})},"bindMapResize":function(){$(window).resize(this.handleWindowResize.bind(this))},"bindMapZoom":function(){var a,b,c=this,d=12;google.maps.event.addListener(c.map,"zoom_changed",function(){a=c.map.getZoom(),a<=d?(b=250*Math.pow(2,14-a),c.circle.setRadius(b)):c.circle.setRadius(c.circleRadius)})},"handleWindowResize":function(){var a=this.map.getCenter();google.maps.event.trigger(this.map,"resize"),this.map.setCenter(a)},"openMap":function(){!0===this.mapLoaded?this.setupMap():!1===this.mapLoading&&this.loadScript()},"loadScript":function(){this.mapLoading=!0;var a=this.opt.googleMapsUrl+"&callback=Kj.Map.mapInitialized";$.getScript(a)},"mapInitialized":function(){this.mapLoaded=!0,this.setupMap()}},b={"init":function(a){this.checkPassedArgs(a),this.opt=a,this.mapTracked=!1,this.cache(),this.bindListeners()},"checkPassedArgs":function(a){Kj.Utilities.verifyPassedArgs({"val":a,"required":!0,"typeofString":"object","name":"argument","lengthMin":!0}),Kj.Utilities.verifyPassedArgs({"val":a.closeMessage,"required":!0,"typeofString":"string","name":"closeMessage"})},"cache":function(){this.dom={"$mapLink":$("#MapLink")}},"bindListeners":function(){var a=this;this.dom.$mapLink.magnificPopup({"type":"inline","alignTop":!0,"fixedContentPos":!0,"showCloseBtn":!1,"preloader":!1,"tClose":a.opt.closeMessage,"closeOnBgClick":!0,"callbacks":{"open":function(){a.fireMapGATracking(),Kj.Map.openMap()}}})},"fireMapGATracking":function(){!1===this.mapTracked&&(this.mapTracked=!0,Kj.Tracking.trackGAEvent({"action":"ViewMapClick"}))}};return{"test":{"Map":a},"initMap":function(b){a.init(b)},"initLightBox":function(a){b.init(a)},"openMap":function(){a.openMap()},"mapInitialized":function(){a.mapInitialized()}}}();;(function(){dust.register("infoWindowContent",body_0);function body_0(chk,ctx){return chk.f(ctx.get(["address"], false),ctx,"h",["s"]).w("<br/><a href=\"#\" class=\"view-directions\">").f(ctx.get(["viewDirections"], false),ctx,"h",["s"]).w("</a>");}body_0.__dustBody=!0;return body_0;})();